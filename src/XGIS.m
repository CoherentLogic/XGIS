XGIS ;CLD/JOLLIS - Spatial Support Routines;28 April 2013
;;1.0;XGIS;**PATCHES**;28 April 2013;Build 1

;;  Licensed under the Apache License, Version 2.0 (the "License");
;;   you may not use this file except in compliance with the License.
;;   You may obtain a copy of the License at
;;
;;       http://www.apache.org/licenses/LICENSE-2.0
;;
;;   Unless required by applicable law or agreed to in writing, software
;;   distributed under the License is distributed on an "AS IS" BASIS,
;;   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
;;   See the License for the specific language governing permissions and
;;   limitations under the License.

INIT()
 S ^XGISUTL("CONSTANTS","PI")=3.141592653589793238
 S ^XGISUTL("CONSTANTS","HALF_PI")=1.570796326794896619
 S ^XGISUTL("CONSTANTS","TWO_PI")=6.283185307179586477
 S ^XGISUTL("CONSTANTS","FORTPI")=0.78539816339744833
 S ^XGISUTL("CONSTANTS","R2D")=57.29577951308232088
 S ^XGISUTL("CONSTANTS","D2R")=0.01745329251994329577
 S ^XGISUTL("CONSTANTS","SEC_TO_RAD")=^XGISUTL("CONSTANTS","PI")/180/3600
 S ^XGISUTL("CONSTANTS","EPSLN")=1.0**-10
 S ^XGISUTL("CONSTANTS","MAX_ITER")=20
 S ^XGISUTL("CONSTANTS","COS_67P5")=0.38268343236508977
 S ^XGISUTL("CONSTANTS","AD_C")=1.0026000
 S ^XGISUTL("CONSTANTS","PJD_UNKNOWN")=0
 S ^XGISUTL("CONSTANTS","PJD_3PARAM")=1
 S ^XGISUTL("CONSTANTS","PJD_7PARAM")=2
 S ^XGISUTL("CONSTANTS","PJD_GRIDSHIFT")=3
 S ^XGISUTL("CONSTANTS","PJD_WGS84")=4
 S ^XGISUTL("CONSTANTS","PJD_NODATUM")=5
 S ^XGISUTL("CONSTANTS","SRS_WGS84_SEMIMAJOR")=6378137.0
 S ^XGISUTL("CONSTANTS","SIXTH")=1/6
 S ^XGISUTL("CONSTANTS","RA4")=17/360
 S ^XGISUTL("CONSTANTS","RA6")=67/3024
 S ^XGISUTL("CONSTANTS","RV4")=5/72
 S ^XGISUTL("CONSTANTS","RV6")=55/1296 
 S ^XGISUTL("SERVER","ERRORS",404)="<html><head><title>Error</title></head><body><h1>Invalid API</h1><p><em>VISTA SPATIAL EXTENSIONS GEOJSON SERVER 1.0</em></p></body></html>"
 Q

CONST(KEY)
 Q $G(^XGISUTL("CONSTANTS",KEY),0)

TRNSFORM(SRCCRS,DESTCRS,XINPUT,YINPUT,XOUTPUT,YOUTPUT)
 D &proj4gtm.transform(SRCCRS,DESTCRS,XINPUT,YINPUT,.XOUTPUT,.YOUTPUT)
 Q 0 

SERVER()
 D SERVER^XGISHTTP
 Q